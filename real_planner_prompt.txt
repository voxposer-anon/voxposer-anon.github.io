import numpy as np
from env_utils import execute
from perception_utils import parse_query_obj
import action_utils import composer

objects = ['blue block', 'yellow block']
# Query: place the blue block on the yellow block.
composer("grasp the blue block")
composer("back to default pose")
composer("move to 5cm on top of the yellow block")
composer("open gripper")
# done

objects = ['airpods', 'drawer']
# Query: Open the drawer slowly.
composer("grasp the drawer handle, at 0.5x speed")
composer("move away from the drawer handle by 25cm, at 0.5x speed")
composer("open gripper, at 0.5x speed")
# done

objects = ['soda can', 'pumpkin', 'vase', 'orange', 'tripod']
# Query: move by one cycle between the soda can and the pumpkin, and be careful around the vase.
composer("move to 5cm on top of the soda can, at 0.5x speed when within 20cm of the vase, and keep at least 15cm away from the vase")
composer("move to 5cm on top of the pumpkin, at 0.5x speed when within 20cm of the vase, and keep at least 15cm away from the vase")
composer("move to 5cm on top of the soda can, at 0.5x speed when within 20cm of the vase, and keep at least 15cm away from the vase")
# done

objects = ['grape', 'lemon', 'drill', 'router', 'bread', 'tray']
# Query: put the sweeter fruit in the tray that contains the bread.
composer("grasp the grape")
composer("back to default pose")
composer("move to the top of the tray that contains the bread")
composer("open gripper")
# done

objects = ['orange', 'QR code', 'lemon', 'drawer']
# Query: put the sour fruit into the top drawer.
composer("grasp the top drawer handle")
composer("move away from the top drawer handle by 25cm")
composer("open gripper")
composer("back to default pose")
composer("grasp the lemon")
composer("move to 10cm on top of the top drawer")
composer("open gripper")
# done

objects = ['cyan bowl', 'yellow bowl', 'box', 'ice cream']
# Query: move to the top of the cyan bowl.
composer("move to the top of the cyan bowl")
# done

objects = ['drawer', 'umbrella']
# Query: close the drawer.
composer("push close the drawer handle by 25cm")
# done

objects = ['plate', 'steak', 'fork', 'knife', 'spoon']
# Query: Could you please set up the fork for the steak for me?
composer("grasp the fork")
composer("back to default pose")
composer("move to 10cm to the right of the plate")
composer("open gripper")
composer("back to default pose")
# done

objects = ['beer']
# Query: open the beer.
composer("grasp the beer cap")
composer("turn counter-clockwise by 180 degrees")
composer("back to default pose")
# done

objects = ['steak', 'grill', 'plate']
# Query: Take the steak out of the grill and put it flat on the plate.
composer("grasp the steak")
composer("back to default pose")
composer("rotate the gripper to be 45 degrees slanted relative to the plate")
composer("move to 10cm on top of the plate")
composer("open gripper")
composer("back to default pose")
# done

objects = ['blue tray', 'paper trash']
# Query: sort paper trash into blue tray.
paper_trash = parse_query_obj("paper trash")
blue_tray = parse_query_obj("blue tray")
while np.linalg.norm(paper_trash.position - blue_tray.position) > 0.1:
    composer("grasp the paper trash")
    composer("move to 10cm on top of the blue tray")
    composer("open gripper")
    composer("back to default pose")
# done

objects = ['blue tray', 'paper trash']
# Query: sort paper trash into blue tray.
paper_trash = parse_query_obj("paper trash")
blue_tray = parse_query_obj("blue tray")
while np.linalg.norm(paper_trash.position - blue_tray.position) > 0.1:
    composer("grasp the paper trash")
    composer("move to 10cm on top of the blue tray")
    composer("open gripper")
    composer("back to default pose")
# done